# Hex 输入框功能说明

## 功能概述

在 DeFi 交互平台的合约配置部分，新增了一个可选的 Hex 数据输入框，用于输入和验证十六进制数据。

## 功能特性

### 1. 输入验证
- **格式验证**: 自动验证输入的hex数据格式是否正确
- **实时反馈**: 输入时实时显示验证状态
- **错误提示**: 无效格式时显示红色边框和错误信息

### 2. 数据信息显示
- **字节长度**: 显示hex数据的字节长度
- **格式状态**: 显示"有效Hex格式"或"无效Hex格式"
- **视觉反馈**: 使用绿色勾选图标表示有效，红色叉号表示无效

### 3. 用户体验优化
- **防抖处理**: 使用lodash的debounce功能，避免频繁验证
- **清除功能**: 输入框右侧的清除按钮，一键清空数据
- **可选输入**: 该字段为可选，不影响其他功能的使用

## 使用方法

### 基本输入
1. 在"合约配置"部分的"Hex 数据 (可选)"输入框中输入数据
2. 支持格式：`0x` 开头的十六进制字符串
3. 示例：`0x1234567890abcdef`

### 验证规则
- 必须以 `0x` 开头
- 只能包含十六进制字符：`0-9`, `a-f`, `A-F`
- 长度不限（但必须是偶数个字符）

### 清除数据
- 点击输入框右侧的 ✕ 按钮即可清空数据

## 技术实现

### 状态管理
```typescript
interface IHexData {
  hexInput: string
}

const [hexData, setHexData] = useState<IHexData>({
  hexInput: ''
})
```

### 验证函数
```typescript
const isValidHex = (hex: string): boolean => {
  if (!hex) return true
  return /^0x[a-fA-F0-9]*$/.test(hex)
}
```

### 防抖处理
```typescript
const debouncedSetHexInput = _.debounce((value: string) => {
  setHexData(prev => ({ ...prev, hexInput: value }))
}, 300)
```

## 界面展示

### 有效输入状态
- 输入框：正常边框
- 状态显示：绿色勾选图标 + "有效Hex格式 (X 字节)"
- 清除按钮：可点击的 ✕ 按钮

### 无效输入状态
- 输入框：红色边框
- 状态显示：红色叉号图标 + "无效Hex格式，请以0x开头并只包含十六进制字符"
- 清除按钮：可点击的 ✕ 按钮

### 空输入状态
- 输入框：正常边框
- 状态显示：无
- 清除按钮：隐藏

## 扩展性

该hex输入框设计具有良好的扩展性：
- 可以轻松添加更多的hex数据处理功能
- 可以集成到合约调用中作为参数
- 可以添加hex数据的编码/解码功能
- 可以支持批量hex数据处理

## 注意事项

1. **可选字段**: 该输入框为可选字段，不会影响其他功能的正常使用
2. **实时验证**: 输入时会实时进行格式验证，提供即时反馈
3. **性能优化**: 使用防抖处理，避免频繁的验证操作
4. **用户体验**: 提供清晰的视觉反馈和操作提示

